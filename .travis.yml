sudo: false
os:
- linux
language: haskell
cabal: '2.4'
cache:
  directories:
  - "$HOME/.stack"
before_install:
- mkdir -p ~/.local/bin
- export PATH=$HOME/.local/bin:$PATH
- travis_retry curl -L https://get.haskellstack.org/stable/linux-x86_64.tar.gz | tar
  xz --wildcards --strip-components=1 -C ~/.local/bin '*/stack'
install:
- stack build
- stack haddock
script:
- stack --no-terminal --skip-ghc-check test
- curl -sSL https://raw.github.com/ndmitchell/hlint/master/misc/run.sh | sh -s .
deploy:
- provider: pages
  local_dir: "$(stack path --local-doc-root)"
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  keep_history: true
  on:
    branch: master
- provider: hackage
  username: "$HACKAGE_USER"
  password: "$HACKAGE_PASSWORD"
  skip_cleanup: true
  on:
    branch: master
env:
  global:
  - secure: CmQvJbvV7gw8Y2EzACxk0gESmj35Gm3EYz5/isBYEzIvgqD401aPM+BnTcYONjMhMsAZWlgp7LIZqpTe3vFiM6nhyfz4zJAjIQflK6pZor7t9Z6m/uzajmHQEeNDGCmDs/Md3vhmOQeQCycHZTlukUXXcONnWyk0X9GAcg511Tocp/M3gt6EEtyZQ92YNuomeR1Ljh7orgoEdUjL6nPfnlHyBGtaOsl4VkZ0Rp4CUzeUiTgH/YwH2iRzmwnJm5mrl7armiwt3VOZzUPziRhNr9rVK4YE7TapRPbyysv/s5OkC7DhDzfjf5vAEKQpfRuDzsVB139xUP4w8vFifDe/NuDogr9O2NoSlvwEHascsLO+UE+O9oaDRKA+7bp8cV0zRA2ywgYq9mR9+QRTstJi+GfbtRqx5DeSat/R13DFnt3j7AMxZvqJvq174HzLAPjwoisqnPwUxEeLm/fxNLH6ACrkz5+CsiF3CZxvgGiGCVXijDRcW3lCn9sruXV1lYz4X9HUAUwQUUlCy8BhFjR321zixfuQJQYcpG7iLTJKt6a/NQ2ClD4LXyIadFo/lCIVnRpLjzxu5A1KV9DxvLxVNzqiScs3pyzfDCfOPlLREmYG+fNzTvZ0P9MIGExoBd6ltNYudFrbrKgNiMbWhVBuVsQzE+rR0PVf+IKH5MZGi5w=
